% Zixuan Zhou
% Charade project - week 2
% % PsychDebugWindowConfiguration;

%% SCREEN SETUP
PsychDefaultSetup(2);
Screen('Preference', 'VisualDebugLevel', 1) ; % suppress Psychtoolbox welcome screen
Screen('Preference', 'SkipSyncTests', 2);
screenNumber     = max(Screen('Screens'));
[w, windowRect]  = PsychImaging('OpenWindow', screenNumber, [0 0 0], [], [], [], [], 5);
[wWidth,wHeight] = Screen('WindowSize', w);    
xmid             = round(wWidth  / 2);         
ymid             = round(wHeight / 2);   

KbName('UnifyKeyNames');                       
keyNumSpace = min(KbName('space'));
keyCode = zeros(1,256); 
Screen('BlendFunction', w, 'GL_SRC_ALPHA', 'GL_ONE_MINUS_SRC_ALPHA'); %YY

action = 2; % YY: 
% 1: '5780_approach' (x1 moves x2 doesn't move); 
% 2: '5801_hug'

numRadians = 326;


%% COORD SETUP
if action == 1
    x1Coord = str2double({'2350.0', '2345.62', '2340.93', '2337.17', '2334.79', '2330.62', '2325.99', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2322.53', '2321.26', '2318.95', ...
        '2314.98', '2313.49', '2312.0', '2308.77', '2304.15', '2299.91', '2297.62', '2294.46', '2289.95', '2281.59', '2280.03', '2278.88', '2277.74', '2275.88', '2273.55', '2272.03', '2270.55', '2269.35', '2268.67', '2268.0', '2267.32', '2266.64', '2265.97', '2265.72', '2265.71', '2265.7', '2265.69', '2265.68', '2265.67', '2265.66', '2265.65', '2265.63', '2265.62', '2265.61', '2265.6', '2265.59', '2265.58', '2265.57', '2265.56', '2265.55', '2265.54', '2265.53', '2265.51', '2265.5', '2265.49', '2265.48', '2265.47', '2265.46', '2265.45', '2265.44', '2265.43', '2265.42', '2265.41', '2265.39', '2265.38', '2265.37', '2265.36', '2265.35', '2265.34', '2265.33', '2265.32', '2265.31', '2265.3', '2265.28', '2265.27', '2265.26', '2265.25', '2265.24', '2265.23', '2265.22', '2265.21', '2265.2', '2265.19', '2265.18', '2265.16', '2265.15', '2265.14', '2265.13', '2265.12', '2265.11', '2265.1', '2265.09', '2265.09', '2265.09', '2265.08', '2265.08', '2265.07', '2265.04', '2265.02', '2265.0', '2264.96', '2264.92', '2264.86', '2264.78', '2264.68', '2264.58', '2264.47', '2264.36', '2264.27', '2264.19', '2264.11', '2264.03', '2263.87', '2263.63', '2263.42', '2263.23', '2263.02', '2262.79', '2262.56', '2262.19', '2261.83', '2261.69', '2261.56', '2261.43', '2261.29', '2261.16', '2260.91', '2260.4', '2259.96', ...
        '2259.57', '2259.15', '2258.5', '2258.01', '2257.72', '2257.44', '2257.15', '2256.8', '2256.28', '2255.76', '2254.99', '2254.19', '2253.59', '2252.98', '2252.17', '2251.22', '2250.66', '2250.15', '2249.63', '2248.77', '2247.63', '2246.47', '2245.41', '2244.6', '2243.79', '2242.63', '2241.45', '2240.92', '2240.38', '2239.85', '2239.32', '2236.91', '2235.42', '2234.15', '2233.16', '2232.17', '2230.77', '2229.44', '2228.62', '2227.79', '2226.97', '2225.37', '2223.89', '2222.78', '2221.66', '2220.53', '2219.39', '2218.08', '2216.37', '2215.14', '2214.24', '2213.34', '2211.64', '2208.22', '2202.62', '2197.73', '2189.48', '2185.59', '2184.15', '2182.71', '2181.73', '2180.85', '2179.86', '2178.87', '2177.88', '2174.74', '2172.51', '2168.61', '2165.74', '2164.4', '2163.07', '2154.52', '2151.11', '2148.98', '2146.54', '2143.87', '2141.21', '2136.23', '2133.94', '2130.56', '2128.3', '2126.25', '2123.57', '2119.49', '2115.36', '2111.0', '2109.01', '2107.15', '2104.28', '2101.22', ...
        '2099.07'}); 
    y1Coord = str2double({'1500.0', '1500.4', '1500.82', '1501.14', '1501.33', '1501.67', '1502.02', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.27', '1502.61', '1503.22', ...
        '1504.24', '1504.6', '1504.97', '1505.74', '1506.8', '1507.72', '1508.2', '1508.85', '1509.74', '1511.27', '1511.55', '1511.75', '1511.94', '1512.26', '1512.65', '1512.89', '1513.13', '1513.32', '1513.43', '1513.53', '1513.64', '1513.74', '1513.85', '1513.97', '1514.09', '1514.22', '1514.34', '1514.47', '1514.59', '1514.72', '1514.84', '1514.97', '1515.09', '1515.22', '1515.34', '1515.47', '1515.59', '1515.72', '1515.84', '1515.97', '1516.09', '1516.22', '1516.34', '1516.47', '1516.59', '1516.72', '1516.85', '1516.97', '1517.1', '1517.22', '1517.35', '1517.47', '1517.6', '1517.72', '1517.85', '1517.97', '1518.1', '1518.22', '1518.35', '1518.47', '1518.6', '1518.72', '1518.85', '1518.97', '1519.1', '1519.22', '1519.35', '1519.47', '1519.6', '1519.72', '1519.85', '1519.98', '1520.1', '1520.23', '1520.35', '1520.48', '1520.6', '1520.73', '1520.85', '1520.98', '1521.1', '1521.24', '1521.4', '1521.56', '1521.59', '1521.57', '1521.34', '1521.07', '1520.9', '1520.73', '1520.5', '1520.28', '1519.97', '1519.55', '1519.11', '1518.66', '1518.26', '1517.86', '1517.55', '1517.29', '1517.04', '1516.78', '1516.32', '1515.62', '1515.07', '1514.56', '1514.04', '1513.5', '1512.95', '1512.16', '1511.36', '1511.1', '1510.83', '1510.57', '1510.3', '1510.04', '1509.57', '1508.62', '1507.84', '1507.17', ...
        '1506.47', '1505.42', '1504.65', '1504.22', '1503.79', '1503.36', '1502.84', '1502.11', '1501.37', '1500.35', '1499.29', '1498.53', '1497.77', '1496.8', '1495.67', '1495.04', '1494.46', '1493.88', '1492.95', '1491.74', '1490.55', '1489.49', '1488.71', '1487.93', '1486.86', '1485.78', '1485.31', '1484.85', '1484.38', '1483.91', '1481.9', '1480.71', '1479.71', '1478.96', '1478.2', '1477.18', '1476.21', '1475.63', '1475.05', '1474.48', '1473.4', '1472.42', '1471.7', '1470.99', '1470.28', '1469.58', '1468.79', '1467.77', '1467.06', '1466.55', '1466.04', '1465.09', '1463.26', '1460.48', '1458.15', '1454.28', '1452.52', '1451.9', '1451.27', '1450.82', '1450.4', '1449.95', '1449.5', '1449.05', '1447.67', '1446.63', '1444.86', '1443.6', '1443.03', '1442.47', '1438.8', '1437.39', '1436.54', '1435.61', '1434.62', '1433.64', '1431.68', '1430.81', '1429.57', '1428.7', '1427.9', '1426.88', '1425.38', '1423.92', '1422.45', '1421.75', '1421.08', '1420.08', '1419.04', ...
        '1418.32'}); 
    t1Orientation = str2double({'0.0', '0.0', '0.01', '0.01', '0.01', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.02', '0.03', ...
        '0.03', '0.04', '0.05', '0.05', '0.06', '0.07', '0.08', '0.08', '0.09', '0.1', '0.11', '0.11', '0.12', '0.12', '0.12', '0.13', '0.13', '0.13', '0.13', '0.13', '0.13', '0.14', '0.14', '0.14', '0.2', '0.31', '0.41', '0.51', '0.62', '0.72', '0.82', '0.92', '1.03', '1.13', '1.23', '1.33', '1.44', '1.54', '1.64', '1.75', '1.85', '1.95', '2.05', '2.16', '2.26', '2.36', '2.46', '2.57', '2.67', '2.77', '2.88', '2.98', '3.08', '3.18', '3.29', '3.39', '3.49', '3.59', '3.7', '3.8', '3.9', '4.01', '4.11', '4.21', '4.31', '4.42', '4.52', '4.62', '4.72', '4.83', '4.93', '5.03', '5.14', '5.24', '5.34', '5.44', '5.55', '5.65', '5.75', '5.85', '5.96', '6.06', '6.12', '6.09', '6.07', '6.04', '6.02', '5.98', '5.95', '5.93', '5.92', '5.9', '5.89', '5.87', '5.85', '5.83', '5.81', '5.8', '5.78', '5.77', '5.76', '5.76', '5.75', '5.73', '5.71', '5.7', '5.69', '5.67', '5.66', '5.65', '5.63', '5.61', '5.61', '5.6', '5.59', '5.59', '5.58', '5.57', '5.56', ...
        '5.54', '5.53', '5.52', '5.5', '5.48', '5.48', '5.47', '5.46', '5.45', '5.44', '5.43', '5.41', '5.4', '5.39', '5.38', '5.36', '5.35', '5.34', '5.33', '5.32', '5.31', '5.29', '5.28', '5.26', '5.25', '5.24', '5.23', '5.22', '5.21', '5.2', '5.2', '5.19', '5.17', '5.16', '5.14', '5.14', '5.13', '5.11', '5.1', '5.1', '5.09', '5.08', '5.07', '5.06', '5.05', '5.05', '5.04', '5.03', '5.02', '5.01', '5.01', '5.0', '4.99', '4.98', '4.97', '4.94', '4.91', '4.91', '4.9', '4.89', '4.88', '4.9', '4.92', '4.91', '4.91', '4.9', '4.89', '4.92', '4.9', '4.89', '4.88', '4.88', '4.88', '4.86', '4.86', '4.85', '4.84', '4.83', '4.85', '4.84', '4.83', '4.85', '4.85', '4.84', '4.83', '4.81', '4.8', '4.8', '4.81', '4.81', '4.8', ...
        '4.8'});  

    % x2Coord = 1650; % YY
    % y2Coord = 1500;
    x2Coord = str2double({'1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0', '1650.0'});
    y2Coord = str2double({'1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0'});
    t2Orientation = str2double({'0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0'});
    
elseif action == 2
    x1Coord = str2double({'2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2350.0', '2349.82', '2348.6', '2347.38', '2346.16', '2344.94', '2343.72', '2342.51', '2341.29', '2340.07', '2338.85', '2337.63', '2336.41', '2335.19', '2333.98', '2332.76', '2331.54', '2330.32', '2329.1', '2327.88', '2326.67', '2325.45', '2324.23', '2323.01', '2321.79', '2320.57', '2319.35', '2318.14', '2316.92', '2315.7', '2314.48', '2313.26', '2312.04', '2310.82', '2309.61', '2308.39', '2307.17', '2305.95', '2304.73', '2303.51', '2302.29', '2301.08', '2299.86', '2298.64', '2297.42', '2296.2', '2294.98', '2293.77', '2292.55', '2291.33', '2290.11', '2288.89', '2287.67', '2277.59', '2249.28', '2226.1', '2207.97', '2191.85', '2179.45', '2166.24', '2153.4', '2140.27', '2124.11', '2105.07', '2091.97', '2072.4', '2059.15', '2042.8', '2022.59', '2008.3', '1983.18', '1969.8', '1953.21', '1938.67', '1921.09', '1901.7', '1885.48', '1867.85', '1850.85', '1834.5', '1822.26', '1808.5', '1798.47', '1790.28', '1780.58', '1770.95', '1763.99', '1757.19', '1749.85', '1745.85', '1739.08', '1733.33', '1728.75', '1724.0', '1720.74'});
    y1Coord = str2double({'1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1500.0', '1499.92', '1499.41', '1498.89', '1498.38', '1497.86', '1497.35', '1496.83', '1496.32', '1495.8', '1495.29', '1494.77', '1494.26', '1493.74', '1493.23', '1492.71', '1492.2', '1491.68', '1491.17', '1490.66', '1490.14', '1489.63', '1489.11', '1488.6', '1488.08', '1487.57', '1487.05', '1486.54', '1486.02', '1485.51', '1484.99', '1484.48', '1483.96', '1483.45', '1482.93', '1482.42', '1481.9', '1481.39', '1480.87', '1480.36', '1479.84', '1479.33', '1478.81', '1478.3', '1477.78', '1477.27', '1476.75', '1476.24', '1475.72', '1475.21', '1474.69', '1474.18', '1473.66', '1470.31', '1462.96', '1459.69', '1458.38', '1457.96', '1458.22', '1459.04', '1460.35', '1462.15', '1464.86', '1468.4', '1471.11', '1475.55', '1478.9', '1483.32', '1489.39', '1494.04', '1502.93', '1508.01', '1514.82', '1520.77', '1528.93', '1538.77', '1546.99', '1556.62', '1566.36', '1576.99', '1585.02', '1594.55', '1602.23', '1608.83', '1616.46', '1624.48', '1630.39', '1636.22', '1642.18', '1645.41', '1651.09', '1656.0', '1660.12', '1664.32', '1667.23'}); 
    t1Orientation = str2double({'0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.01', '0.1', '0.19', '0.27', '0.36', '0.45', '0.54', '0.62', '0.71', '0.8', '0.88', '0.97', '1.06', '1.14', '1.23', '1.32', '1.41', '1.49', '1.58', '1.67', '1.75', '1.84', '1.93', '2.01', '2.1', '2.19', '2.28', '2.36', '2.45', '2.54', '2.62', '2.71', '2.8', '2.88', '2.97', '3.06', '3.15', '3.23', '3.32', '3.41', '3.49', '3.58', '3.67', '3.76', '3.84', '3.93', '4.02', '4.1', '4.19', '4.28', '4.36', '4.45', '4.46', '4.35', '4.23', '4.18', '4.13', '4.08', '4.04', '4.0', '3.97', '3.94', '3.92', '3.9', '3.88', '3.86', '3.84', '3.81', '3.79', '3.77', '3.74', '3.72', '3.72', '3.68', '3.63', '3.64', '3.61', '3.58', '3.53', '3.53', '3.5', '3.45', '3.43', '3.44', '3.41', '3.4', '3.4', '3.43', '3.42', '3.41', '3.4', '3.37', '3.39', '3.37'});  
   
    x2Coord = str2double({'1650.0', '1648.36', '1646.45', '1643.43', '1641.22', '1637.82', '1633.34', '1631.12', '1626.56', '1623.58', '1621.93', '1620.53', '1619.27', '1618.02', '1616.76', '1615.95', '1615.2', '1614.52', '1613.69', '1612.97', '1612.06', '1611.37', '1610.87', '1609.88', '1609.55', '1609.27', '1609.24', '1609.55', '1609.63', '1609.8', '1610.38', '1611.62', '1613.47', '1615.67', '1619.13', '1621.44', '1624.16', '1628.23', '1630.19', '1633.74', '1634.67', '1635.61', '1636.57', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39', '1637.39'});
    y2Coord = str2double({'1500.0', '1503.94', '1508.77', '1515.88', '1521.45', '1530.18', '1542.29', '1548.81', '1562.03', '1571.58', '1577.27', '1582.83', '1588.28', '1593.72', '1599.17', '1602.85', '1606.41', '1609.71', '1613.93', '1617.76', '1622.83', '1626.85', '1629.86', '1639.55', '1642.96', '1647.48', '1654.1', '1659.52', '1660.55', '1661.66', '1665.21', '1670.78', '1678.32', '1685.74', '1694.23', '1699.79', '1705.1', '1712.91', '1716.27', '1722.08', '1723.47', '1724.93', '1726.46', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76', '1727.76'});
    t2Orientation = str2double({'0.0', '5.53', '6.24', '6.27', '6.24', '6.24', '6.22', '6.19', '6.2', '6.17', '6.15', '6.13', '6.12', '6.11', '6.09', '6.09', '6.08', '6.07', '6.06', '6.06', '6.05', '6.04', '6.03', '5.97', '5.97', '5.93', '5.86', '5.81', '5.78', '5.74', '5.72', '5.68', '5.63', '5.58', '5.52', '5.46', '5.42', '5.39', '5.34', '5.31', '5.29', '5.28', '5.3', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31', '5.31'});

end

%% SCALING
% canvas scale
scale = 10;
canvasWO = 4000;
canvasHO = 3000;
canvasW = canvasWO /scale;
canvasH = canvasW * (3/4);
canvasR = [xmid-canvasW, ymid-canvasH, xmid+canvasW, ymid+canvasH];

x1Coord = (x1Coord./scale).*2.+canvasR(1);
y1Coord = ((y1Coord./scale).*2.-canvasR(4)).*(-1);
t1Orientation = t1Orientation./57;

x2Coord = (x2Coord/scale)*2+canvasR(1);
y2Coord = ((y2Coord/scale)*2-canvasR(4))*(-1);
t2Orientation = t2Orientation./57;

sideL = 80;        % Length of each side

x1 = [x1Coord', (x1Coord - sideL / 2)', (x1Coord + sideL / 2)']; % x11 = [triangleX, triangleX - sideL / 2, triangleX + sideL / 2];
y1 = [(y1Coord - (sqrt(3) / 4) * sideL)', (y1Coord + (sqrt(3) / 4) * sideL)', (y1Coord + (sqrt(3) / 4)*sideL)']; % y11 = [triangleY - (sqrt(3) / 4) * sideL, triangleY + (sqrt(3) / 4) * sideL, triangleY + (sqrt(3) / 4)*sideL];
rot1 = [cos(t1Orientation), -sin(t1Orientation); sin(t1Orientation), cos(t1Orientation)];

x2 = [x2Coord', (x2Coord - sideL / 2)', (x2Coord + sideL / 2)']; % x11 = [triangleX, triangleX - sideL / 2, triangleX + sideL / 2];
y2 = [(y2Coord - (sqrt(3) / 4) * sideL)', (y2Coord + (sqrt(3) / 4) * sideL)', (y2Coord + (sqrt(3) / 4)*sideL)']; % y11 = [triangleY - (sqrt(3) / 4) * sideL, triangleY + (sqrt(3) / 4) * sideL, triangleY + (sqrt(3) / 4)*sideL];
rot2 = [cos(t2Orientation), -sin(t2Orientation); sin(t2Orientation), cos(t2Orientation)];


%% DOT
% Screen('DrawDots', w, dotPosition, dotSize, dotColor, [], 2);

dotFrame = 10;
dotStartFrame = int32(rand() * numRadians - dotFrame);
dotT = 1; % triangle 1
dotC = 0.6;%[50, 50, 50]; % color
dotS = 3; % size
dotStartTime = 0;
dotEndTime = 0;
t = 0;
keyIsDown = 0;


%% EXPERIMENT
for i = 1:numel(x1Coord)
    Screen('FillRect', w, 1, canvasR);
    % triangle 1
    rot1 = [cos(t1Orientation(i)), -sin(t1Orientation(i)); sin(t1Orientation(i)), cos(t1Orientation(i))];

    a=[(x1(i,1) - x1Coord(i)) * cos(t1Orientation(i)) - (y1(i,1) - y1Coord(i)) * sin(t1Orientation(i)) + x1Coord(i), ...
       (x1(i,2) - x1Coord(i)) * cos(t1Orientation(i)) - (y1(i,2) - y1Coord(i)) * sin(t1Orientation(i)) + x1Coord(i), ...
       (x1(i,3) - x1Coord(i)) * cos(t1Orientation(i)) - (y1(i,3) - y1Coord(i)) * sin(t1Orientation(i)) + x1Coord(i)];
    
    b=[(x1(i,1) - x1Coord(i)) * sin(t1Orientation(i)) + (y1(i,1) - y1Coord(i)) * cos(t1Orientation(i)) + y1Coord(i), ...
       (x1(i,2) - x1Coord(i)) * sin(t1Orientation(i)) + (y1(i,2) - y1Coord(i)) * cos(t1Orientation(i)) + y1Coord(i), ...
       (x1(i,3) - x1Coord(i)) * sin(t1Orientation(i)) + (y1(i,3) - y1Coord(i)) * cos(t1Orientation(i)) + y1Coord(i)];
    
   % triangle 2
    rot2 = [cos(t2Orientation(i)), -sin(t2Orientation(i)); sin(t2Orientation(i)), cos(t2Orientation(i))];

    c=[(x2(i,1) - x2Coord(i)) * cos(t2Orientation(i)) - (y2(i,1) - y2Coord(i)) * sin(t2Orientation(i)) + x2Coord(i), ...
       (x2(i,2) - x2Coord(i)) * cos(t2Orientation(i)) - (y2(i,2) - y2Coord(i)) * sin(t2Orientation(i)) + x2Coord(i), ...
       (x2(i,3) - x2Coord(i)) * cos(t2Orientation(i)) - (y2(i,3) - y2Coord(i)) * sin(t2Orientation(i)) + x2Coord(i)];
    
    d=[(x2(i,1) - x2Coord(i)) * sin(t2Orientation(i)) + (y2(i,1) - y2Coord(i)) * cos(t2Orientation(i)) + y2Coord(i), ...
       (x2(i,2) - x2Coord(i)) * sin(t2Orientation(i)) + (y2(i,2) - y2Coord(i)) * cos(t2Orientation(i)) + y2Coord(i), ...
       (x2(i,3) - x2Coord(i)) * sin(t2Orientation(i)) + (y2(i,3) - y2Coord(i)) * cos(t2Orientation(i)) + y2Coord(i)];
    %Screen('FillPoly', w, [0, 0, 1], ([x(i,:); y(i,:)])');
    % Screen('FillPoly', w, [0, 0, 1], ([a; b])'); % YY
    Screen('FillPoly', w, 0.5, ([a; b])');
    %Screen('FillPoly', w, [0, 0, 1], ([(x(i,1)-x1Coord(i))*cos(r) - (y(i,1)-y1Coord(i))*sin(r)+x1Coord(i),(x(i,2)-x1Coord(i))*cos(r)-(y(i,2)-y1Coord(i))*sin(r)+x1Coord(i),(x(i,3)-x1Coord(i))*cos(r)-(y(3,2)-y1Coord(i))*sin(r)+x1Coord(i); (x(i,1)-x1Coord(i))*cos(r) + (y(i,1)-y1Coord(i))*cos(r) + y1Coord(i),(x(i,2)-x1Coord(i))*cos(r) + (y(i,2)-y1Coord(i))*cos(r) + y1Coord(i),(x(i,3)-x1Coord(i))*cos(r) + (y(i,3)-y1Coord(i))*cos(r) + y1Coord(i)])');
    % Screen('FillPoly', w, [1, 0, 0], ([x2(1,:); y2(1,:)])'); % YY
%     Screen('FillPoly', w, 0.5, ([x2(1,:); y2(1,:)])'); % YY
    Screen('FillPoly', w, 0.5, ([c; d])');
    
    if (i >= dotStartFrame && i < (dotStartFrame + dotFrame))
        Screen('DrawDots', w, [x1Coord(i), y1Coord(i) - (sqrt(3) / 4) * sideL + sideL / sqrt(3)], dotS, dotC);
    end

    if (i == dotStartFrame)
        dotStartTime = GetSecs;
    end
    if (i == dotStartFrame + dotFrame) 
        dotEndTime = GetSecs;
    end

    frameDuration = (dotEndTime - dotStartTime)/10;

    Screen('Flip', w);

    [keyIsDown, secs, keyCode] = KbCheck;
    if keyCode(keyNumSpace)
        t = secs - dotStartTime;
        keyCode = zeros(1,256);
    end 

end


%% END
WaitSecs(1);
sca;



